<%- include('partials/header'); %>
<div>
	<% let grades = ["6th", "7th", "8th", "9th", "10th", "11th", "12th", "College Freshman", "College Sophmore", "College Junior", "College Senior"]; %>
	<select onchange="filterGrades()" id="selection">
		<option value="No Filter" selected>No Filter By Grade</option>
		<% for (let i = 0; i < grades.length; i++) { %>
			<option value="<%=grades[i]%>" <% if (path == grades[i]) {%> selected <% } %>><%=grades[i]%></option>
		<% } %>
	</select>
	<script>
		function filterGrades() {
			var x = document.getElementById('selection').value;
			if (x == 'No Filter') {
				location.href='/';
			} else {
				location.href=`/filter/${x}`;
			}
		}
	</script>
<% if (students.length > 0) { %>
	<table class="table">
		<thead class="thead-dark">
			<tr>
				<th>First Name</th>
				<th>Last Name</th>
				<th>School</th>
				<th>Grade</th>
				<th>Email</th>
				<th>ID</th>
				<th>Action</th>
			</tr>
		</thead>
		<tbody>
		<% for (let i = 0; i < students.length; i++) { %>
			<tr>
				<td><%= students[i].first_name %></td>
				<td><%= students[i].last_name %></td>
				<td><%= students[i].school %></td>
				<td><%= students[i].grade %></td>
				<td><%= students[i].email %></td>
				<td><%= students[i].id_number %></td>
				<td>
					<a href="/edit/<%= students[i].id %>" class="btn btn-sm btn-success">Edit</a>
					<a href="/delete/<%= students[i].id %>" class="btn btn-sm btn-danger">Delete</a>
				</td>
			</tr>
		<% } %>
		</tbody>
	</table>
	<a href="/next-grade" class="btn btn-sm btn-info">Increment Grades</a>
<% } else { %>
	<p class="text-center">No students found.</p>
<% } %>
</div>
</div>
</body>
</html>